(function(z){
'use strict';var J0=function(a){z.H.call(this);this.C(a)},K0=function(a){z.Qf.call(this);this.C(a)},L0=function(a){z.Qf.call(this);this.C(a)},vVa=function(a,b){return z.t(a.Z.get(b),a.A2,a)},wVa=function(a,b,c){return z.t(c?z.dc(a.Ba.A2(c)):vVa(a.Ba,b),function(c){a.ma.mc(c);var e=z.ZM(a,b);z.dD(e,c.streamItems,c.paging);c.se=e})},M0=function(a){K0.apply(this,arguments)},N0=function(a){L0.apply(this,arguments)},xVa=function(a,b,c){var d=a.V.R(z.Go,{collectionSlug:b});return z.zD(a,d,function(){return wVa(this.sb,
d,c)})},yVa=function(a){if(!a.length)throw Error("getFirst called on an empty array");return a[0]},O0=function(){return(0,z.v)('\x3cdiv class\x3d"u-flex u-marginBottom24"\x3e\x3cdiv class\x3d"avatarPlaceholder u-height32 u-width32 u-flex0"\x3e\x3c/div\x3e\x3cdiv\x3e\x3cdiv class\x3d"linePlaceholder linePlaceholder--thin linePlaceholder--small"\x3e\x3c/div\x3e\x3cdiv class\x3d"linePlaceholder linePlaceholder--thin linePlaceholder--smaller"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e')},P0=function(){return(0,z.v)('\x3csection class\x3d"extremePostPreview u-marginBottom48 u-animation--shimmerInfinite"\x3e\x3cdiv class\x3d"extremePostPreview-post u-minWidth0 u-flex1 u-marginRight24 u-textAlignLeft"\x3e\x3cdiv class\x3d"u-clearfix u-marginBottom16"\x3e\x3cdiv class\x3d"linePlaceholder"\x3e\x3c/div\x3e\x3cdiv class\x3d"linePlaceholder"\x3e\x3c/div\x3e\x3cdiv class\x3d"linePlaceholder linePlaceholder--truncated"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"u-flex"\x3e\x3cdiv class\x3d"avatarPlaceholder u-height32 u-width32 u-flex0"\x3e\x3c/div\x3e\x3cdiv\x3e\x3cdiv class\x3d"linePlaceholder linePlaceholder--thin linePlaceholder--small"\x3e\x3c/div\x3e\x3cdiv class\x3d"linePlaceholder linePlaceholder--thin linePlaceholder--small"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"extremePostPreview-image u-background--brandDust u-flex0 u-width152 u-height145 u-xs-width80 u-xs-height72"\x3e\x3c/div\x3e\x3c/section\x3e')},
zVa=function(){return(0,z.v)('\x3cdiv class\x3d"u-marginBottom32 u-animation--shimmerInfinite"\x3e\x3cdiv class\x3d"u-marginRight32 u-marginLeft32 u-paddingBottom16 u-borderBottomLightest u-clearfix"\x3e\x3cdiv class\x3d"linePlaceholder linePlaceholder-thick linePlaceholder--small"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"u-padding32 u-clearfix"\x3e'+O0()+O0()+O0()+"\x3c/div\x3e\x3c/div\x3e")},Q0=function(a){z.H.call(this);this.C(a)},R0=function(a){z.cA.call(this,a);this.Z=a.get("request");this.V=
a.get("route-builder");this.Aa=a.get("screen")},AVa=function(a,b,c){b=c.currentUser.userId==a.collection.creatorId;var d=null==a.collection.virtuals.permissions?null:a.collection.virtuals.permissions.canManageAll;a=""+((c.variants.enable_aurora_public_beta&&a.lDa&&(b||d)?(0,z.v)('\x3cdiv class\x3d"butterBar is-active"\x3e'+z.x(z.Uz({lR:(0,z.M)('This publication is enrolled in beta. \x3cspan class\x3d"u-xs-hide"\x3e'+z.x(z.N({href:(0,z.K)(""+z.D(z.Xk(a,c))),s:(0,z.M)("Customize its design."),l:(0,z.M)("link--butter")},
c))+'\x3c/span\x3e\x3cspan class\x3d"u-xs-show"\x3eTo preview and play around with the new experience, visit your publication on desktop.\x3c/span\x3e')}))+"\x3c/div\x3e"):"")+z.x(z.oR(a,c))+'\x3cdiv class\x3d"u-marginBottom40 js-collectionStream"\x3e'+((null==a.streamItems?0:a.streamItems.length)?z.x(z.ZP({items:a.streamItems,context:c.j.eb.wK,collection:a.collection},0,c)):'\x3cdiv class\x3d"u-textAlignCenter u-marginTop180 u-marginBottom180 js-streamItem js-noPosts"\x3e'+z.x(z.bQ({mJ:(0,z.M)("This publication does not have any stories yet.")}))+
"\x3c/div\x3e")+"\x3c/div\x3e"+z.x(z.kE(a,c))+z.x(z.lE(a,c))+z.x(z.rQ({collection:a.collection,content:(0,z.M)(""+z.x(z.nR(a,c)))},c)));return(0,z.v)(a)},S0=function(a,b,c){z.dC.call(this,a,b,c);this.Pb=b.collectionSlug;this.s9=this.Ma=null;this.qa=a.get("popover");this.xi=a.get("referrer-tracker");this.Pa=a.get("screen-request");this.Wa=null;this.vh=!!c.vj},T0=function(a){z.cA.call(this,a);this.Aa=a.get("screen")},U0=function(a){z.cA.call(this,a);this.Aa=a.get("screen")},V0=function(a){z.cA.call(this,
a);this.Aa=a.get("screen")},BVa=function(a,b,c){var d=a.sD,e=a.streamItems;null==a.heroPromos||z.la(a.heroPromos);var g=a.heroPromos;b="";var k=d==c.j.eb.Es,d='\x3cdiv class\x3d"js-homeStream"\x3e'+z.x(z.ZP({items:e,context:d},0,c))+"\x3c/div\x3e",d=(0,z.M)(d);a=z.x(z.PT({navBar:a.navBar,qfa:k},c))+'\x3cdiv class\x3d"homeContainer u-clearfix js-homepage"\x3e'+z.x(d)+(g&&g.length?z.x(z.rF({promo:g[0],pDa:!0},0,c)):"");g='\x3cdiv class\x3d"'+z.C(z.Le("u-foreground u-minHeight100vh"))+'"\x3e';k=(0,z.v)('\x3cdiv class\x3d"extreme-container12col u-flex u-marginTop48"\x3e\x3cdiv class\x3d"extreme-container8col u-width100pct u-flex1 u-borderBox u-paddingRight24 extreme-10colSizeFull extreme-10colPadding0 js-mainfeed"\x3e'+
z.x(P0())+z.x(P0())+z.x(P0())+z.x(P0())+'\x3c/div\x3e\x3cdiv class\x3d"extreme-container4col u-flex0 extreme-10colHide u-heightInherit"\x3e\x3cdiv class\x3d"extremeSidebar extreme-container4col" data-scroll\x3d"dock" data-dock-offset\x3d"js-metabarBottom"\x3e\x3cdiv class\x3d"js-sidebar"\x3e'+z.x(zVa())+z.x(zVa())+"\x3c/div\x3e"+z.x(z.DKa(null,c))+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");c=""+(g+k+z.x(z.kE(null,c))+"\x3c/div\x3e");c=(0,z.v)(c);return(0,z.v)(b+(a+c+"\x3c/div\x3e"))},W0=function(a,b,
c){z.dC.call(this,a,b,c);this.ya=a.get("app");this.Pa=a.get("screen-request");a.get("routeManager").vg(this.path);this.sb=a.get("list-store");this.V=a.get("route-builder");this.kb=a.get("dom-monitor");this.nb=a.get("element-tracker");this.qa=a.get("popover");this.ow=this.og=this.sF=this.Wa=null},CVa=function(a){var b={},b=(b.ignoredIds=X0(a),b),b=a.V.R(z.xza,null,b);z.t(a.Pa.xb(b,z.CM,null,!1),function(b){var d=a.query(".js-sidebar");d&&(z.dw(d,z.ZP,{items:b.streamItems,context:40}),a.nb.yl())})},
DVa=function(a){var b={},b=(b.ignoredIds=X0(a),b),c=z.ap("forceRerankFeed");c&&(b.forceRerankFeed=c);var d=a.V.R(z.nH,null,b);z.t(a.Pa.xb(d,z.CM,null,!0),function(){var b=a.query(".js-mainfeed"),c=a.query(".js-homeStream"),k=a.sb.cm[d];if(k){var l=z.bD(k),p="section"===z.Ff(l[0],"itemType"),q=p?l.slice(0,1):[],l=p?l.slice(1):l;c&&0<q.length&&(z.dw(c,z.ZP,{items:q,context:30}),z.lj(z.Si).enable_mute&&(q=new z.CT(a.ua(),k,q[0],30),q.Ga(c),a.track(q)),0<k.we.length&&k.remove(k.we[0]));b&&z.dw(b,z.ZP,
{items:l,context:39});c=new z.TS(a.ua(),k);c.Ga(b);c.ld(39);c.Gs=!0;a.track(c);a.og=c}})},EVa=function(a){var b={},b=(b.ignoredIds=X0(a),b),c=z.ap("forceRerankFeed");c&&(b.forceRerankFeed=c);var d=a.V.R(z.nH,null,b);z.t(a.Pa.xb(d,z.CM,null,!0),function(){var b=a.query(".js-mainfeed"),c=a.sb.cm[d];c&&(b&&z.dw(b,z.ZP,{items:z.bD(c),context:39}),c=new z.TS(a.ua(),c),c.Ga(b),c.ld(39),c.Gs=!0,a.track(c),a.og=c)})},X0=function(a){return 0==z.bD(a.Wa).length?[]:yVa(z.bD(a.Wa)).section.items.map(function(a){return a.post.postId})};
z.r(J0,z.H);J0.prototype.F=function(){return""};J0.prototype.H=function(){return""};J0.prototype.J=function(){return J0.prototype};J0.prototype.D={name:"TopStoriesNavigation",L:!1,fields:{titleDateFormatted:{name:"titleDateFormatted",g:z.U,h:1},prevSlug:{name:"prevSlug",g:z.U,h:2},nextSlug:{name:"nextSlug",g:z.U,h:3}},N:{}};z.r(K0,z.Qf);z.f=K0.prototype;z.f.F=function(){return""};z.f.H=function(){return""};z.f.Lb=function(){return z.F(this,"collection")};z.f.Ke=z.h(519);z.f.J=function(){return K0.prototype};
z.f.D={name:"CollectionPageStreamResponse",L:!1,fields:{collection:{name:"collection",g:function(){return z.wh},h:1},streamItems:{name:"streamItems",g:function(){return z.BM},aa:z.T,h:2},paging:{name:"paging",g:function(){return z.Mh},h:3},header:{name:"header",g:function(){return z.ug},h:4}},N:{}};z.f.Ke=z.Y(519,function(){return z.F(this,"streamItems")});z.r(L0,z.Qf);z.f=L0.prototype;z.f.F=function(){return""};z.f.H=function(){return""};z.f.Ke=z.h(516);z.f.I0=z.h(528);z.f.Nx=z.h(529);z.f.J=function(){return L0.prototype};
z.f.D={name:"HomepageStreamResponse",L:!1,fields:{streamItems:{name:"streamItems",g:function(){return z.BM},aa:z.T,h:1},paging:{name:"paging",g:function(){return z.Mh},h:2},heroPromos:{name:"heroPromos",g:function(){return z.jk},aa:z.T,h:3},browsableStreamConfigList:{name:"browsableStreamConfigList",isRemoved:z.T},browsableStreamConfigIndex:{name:"browsableStreamConfigIndex",isRemoved:z.T},catalog:{name:"catalog",g:function(){return z.Qi},h:6},topStoriesNavigation:{name:"topStoriesNavigation",g:function(){return J0},
h:7},navBar:{name:"navBar",g:function(){return z.RM},h:8}},N:{}};z.f.Nx=z.Y(529,function(){return z.F(this,"navBar")});z.f.Ke=z.Y(516,function(){return z.F(this,"streamItems")});z.m(M0,K0);M0.prototype.C=function(){this.se=null;K0.prototype.C.call(this)};z.m(N0,L0);N0.prototype.C=function(){this.se=null;L0.prototype.C.call(this)};z.nz.prototype.A2=z.Y(599,function(a){return this.ic(M0,a)});z.nz.prototype.G2=z.Y(593,function(a){return this.ic(N0,a)});
z.nz.prototype.Ap=z.Y(592,function(a){return z.t(this.Z.get(a),this.G2,this)});z.lD.prototype.Ap=z.Y(591,function(a,b,c){return z.t(b?z.dc(this.Ba.G2(b)):this.Ba.Ap(a),function(b){this.ma.mc(b);var e=z.ZM(this,a);z.dD(e,b.streamItems,b.paging);c&&z.aD(e,"source",c);b.se=e},this)});z.yD.prototype.Ap=z.Y(590,function(a,b){return z.zD(this,a,function(){return this.sb.Ap(a,b)})});L0.prototype.I0=z.Y(528,function(){return z.F(this,"heroPromos")});z.wh.prototype.cQ=z.Y(249,function(){return z.F(this,"collectionFeatures")});
z.HN.prototype.cQ=z.Y(248,function(){return z.F(this,"collectionFeatures")});z.Vf.prototype.Ec=z.Y(37,function(){return z.F(this,"createdAt")});z.Zf.prototype.Ec=z.Y(36,function(){return z.F(this,"createdAt")});z.rg.prototype.Ec=z.Y(35,function(){return z.F(this,"createdAt")});z.Sg.prototype.Ec=z.Y(34,function(){return z.F(this,"createdAt")});z.YK.prototype.Ec=z.Y(33,function(){return z.F(this,"createdAt")});z.Lh.prototype.Ec=z.Y(32,function(){return z.F(this,"createdAt")});
z.ri.prototype.Ec=z.Y(31,function(){return z.F(this,"createdAt")});z.si.prototype.Ec=z.Y(30,function(){return z.F(this,"createdAt")});z.Qi.prototype.Ec=z.Y(29,function(){return z.F(this,"createdAt")});z.Pj.prototype.Ec=z.Y(28,function(){return z.F(this,"createdAt")});z.jr.prototype.Ec=z.Y(27,function(){return z.F(this,"createdAt")});z.kr.prototype.Ec=z.Y(26,function(){return z.F(this,"createdAt")});z.BM.prototype.Ec=z.Y(25,function(){return z.F(this,"createdAt")});
z.TM.prototype.Ec=z.Y(24,function(){return z.F(this,"createdAt")});z.MM.prototype.Ec=z.Y(23,function(){return z.F(this,"createdAt")});z.Is.prototype.Ec=z.Y(22,function(){return z.F(this,"createdAt")});z.GM.prototype.Ec=z.Y(21,function(){return z.F(this,"createdAt")});z.ez.prototype.Ec=z.Y(20,function(){return z.F(this,"createdAt")});z.gz.prototype.Ec=z.Y(19,function(){return z.F(this,"createdAt")});z.r(Q0,z.H);Q0.prototype.F=function(){return""};Q0.prototype.H=function(){return""};
Q0.prototype.J=function(){return Q0.prototype};Q0.prototype.D={name:"EntityClientPresented",L:!1,fields:{entityId:{name:"entityId",g:z.U,h:1},entityType:{name:"entityType",g:function(){return z.yBa},h:2}},N:{}};z.m(R0,z.cA);z.f=R0.prototype;z.f.S=function(){z.cA.prototype.S.call(this);z.P(this.Aa.U()).O("open-promo-link",this.Sna,this)};z.f.la=function(){z.cA.prototype.la.call(this);z.P(this.Aa.U()).clear("open-promo-link")};
z.f.Ou=function(a){Object.keys(a||{}).forEach(function(b){var c=a[b].getAttribute("data-collection-id");z.Nx(z.tFa,{promoId:b,collectionId:c})})};z.f.Sna=function(a){var b=a.target.getAttribute("data-promo-id");a=a.target.getAttribute("data-collection-id");z.Nx(z.uFa,{promoId:b,collectionId:a});return 1};z.f.ql=function(){return this.Aa.bb(".js-trackedPromo")};z.f.Nn=function(a){return a.getAttribute("data-promo-id")};z.m(S0,z.dC);z.f=S0.prototype;z.f.vc=function(){return z.t(z.t(xVa(this.Pa,this.Pb),this.Ab,this),this.Dc,this)};z.f.Rc=function(a){return z.t(xVa(this.Pa,this.Pb,a),this.Ab,this)};z.f.Ab=function(a){z.gC(this,a);this.Ma=a.collection;this.s9=a.header;this.Wa=a.se};z.f.Dc=function(){var a=z.Wt(this.Ma,30),b=z.Xt(this.Ma);z.dw(this.Ra,AVa,{collection:this.Ma,header:this.s9,streamItems:z.bD(this.Wa),lDa:a&&!b})};
z.f.S=function(){z.dC.prototype.S.call(this);var a={collectionId:this.Ma.lb()};z.Nx(z.sFa,a);if(this.Ma.Fc()&&(a=this.Ma.cQ()||[],z.Sa(a,12))){var a=window.location.href,b=this.xi.Qx();z.Vx(a,b)}this.vh&&this.oZ();z.jw()||(this.Laa(),z.ix(this,this.Wa,"add",this.Laa.bind(this)));this.Wa.Ek?z.ix(this,this.Wa,"done",this.xba.bind(this)):this.xba()};
z.f.Kb=function(){this.track(new z.tE(this.ua()));this.track(new R0(this.ua()));this.track(new z.dF(this.ua()));var a=this.query(".js-collectionStream"),b=new z.TS(this.ua(),this.Wa);b.ld(14);b.Ga(a);this.track(b)};z.f.ZH=function(){return new z.PD({collectionId:this.Ma.lb()})};z.f.oZ=function(){var a=this.query(".js-pubManageMenu");a&&z.zy(z.By(z.Cy(this.qa).Va(z.fMa,{title:z.cw(z.lMa),mx:z.cw(z.kMa),W3:!0}),a).zf(this.U()),{I1:!0}).ba()};
z.f.Laa=function(){var a=this.query(".js-aboutCollectionBox");a&&z.dw(a,z.dQ,{collection:this.Ma})};z.f.xba=function(){var a=this.query(".js-collectionFooter");z.Ds(a)};z.m(T0,z.cA);T0.prototype.ql=function(){return this.Aa.bb(".js-trackedEntity")};T0.prototype.Nn=function(a){return a.getAttribute("data-entity-id")};T0.prototype.Ou=function(a){a=a||{};z.fb(a,function(a,c){a=Number(a.getAttribute("data-entity-type"));!a||(0,window.isNaN)(a)?window.console.error("Entity "+c+" does not have an entity type."):(c=(new Q0({entityId:c,entityType:a})).Hb(),z.Nx(z.YFa,c))})};z.m(U0,z.cA);U0.prototype.ql=function(){return this.Aa.bb(".js-trackedSequence")};U0.prototype.Nn=function(a){return a.getAttribute("data-sequence-id")};U0.prototype.Ou=function(a){a=a||{};z.hb(a).forEach(function(a){z.Nx(z.HGa,{sequenceId:a})})};z.m(V0,z.cA);V0.prototype.ql=function(){return this.Aa.bb(".js-trackedTopic")};V0.prototype.Nn=function(a){return a.getAttribute("data-topic-id")};V0.prototype.FM=function(a){return a.getAttribute("data-source")||""};V0.prototype.Ou=function(a){var b=this;a=a||{};z.hb(a).forEach(function(c){var d=b.FM(a[c]);z.Nx(z.ZFa,{topicId:c,source:d})})};z.m(W0,z.dC);z.f=W0.prototype;z.f.vc=function(){return z.t(z.t(this.Pa.Ap(this.path),this.c9,this),this.Dc,this)};z.f.$H=function(){return null};z.f.jl=function(){return z.Vi()?z.jw()?"gentle":"aggressive":"none"};z.f.Rc=function(a){return z.t(this.Pa.Ap(this.path,a),this.c9,this)};z.f.Kb=function(){this.track(new z.TD(this.ua()));this.track(new z.tE(this.ua()));this.track(new V0(this.ua()));this.track(new T0(this.ua()));this.track(new z.dF(this.ua()));this.track(new U0(this.ua()));this.KF();this.gw()};
z.f.Ux=function(){return z.ij()?30:1};
z.f.S=function(){var a=this;z.dC.prototype.S.call(this);var b={};b.count=this.Wa.qe();var c;a:switch(this.Ux()){case 30:c="grid_home";break a;default:c="reading_list"}b.context=c;z.Nx(z.zDa,b);z.F(z.Si,"isSwBoot")&&"/"==this.path&&(this.sF=this.Pa.Ap("/?swfillcache\x3d1"),z.t(this.sF,function(b){var c=b.se,d=z.$C(a.Wa,0);z.$C(c,0).Ec()>d.Ec()&&(a.og&&(z.kx(a,a.og),a.og.sg()),z.dD(a.Wa,z.bD(c),b.paging),(b=a.query(".js-homeStream"))&&z.dw(b,z.ZP,{items:z.bD(a.Wa),context:a.Ux()}),a.gw())}));var b=
this.bb(".js-metabar .js-metabarGetStarted"),d=this.Kw;d&&!z.Ut(b)&&(0,z.db)(b,function(b){z.ix(a,d,"affix",function(){z.Ds(b)});z.ix(a,d,"dock",function(){z.Cs(b)})});z.lj(z.Si).enable_expanded_feature_chunk_pool?DVa(this):EVa(this);CVa(this);z.lj(z.Si).enable_branch_io&&z.BC({is_logged_in:z.ij(),is_member:!!z.hj().mediumMemberAt,in_app_browser:"Null",layer_cake:"Null",loaded:!0,num_nonmoc_posts_in_month:0,num_posts_in_day:0,num_posts_in_week:0,num_posts_in_month:0,medium_member_at:"Null",meter_state:"not_metered",
page_type:"home",post_creator_id:"Null",post_creator_name:"Null",post_publication_id:"Null",post_publication_name:"Null",post_topic_name:"Null",post_topic_slug:"Null",profile_name:"Null",profile_photo:"Null",profile_username:"Null",source:"Null",user_created_at:"Null",following_pub:!1,following_topic:!1,following_author:!1})};z.f.la=function(){this.sF&&(this.sF.cancel(!0),this.sF=null);z.dC.prototype.la.call(this)};
z.f.gw=function(){var a=this.query(".js-homeStream");if(a){var b=new z.TS(this.ua(),this.Wa);b.Ga(a);b.ld(this.Ux());b.Gs=!0;this.track(b);this.og=b}};z.f.c9=function(a){this.Wa=z.SN(a.se,25);this.ow=a.Nx()};z.f.Dc=function(a){z.gC(this,a);a={navBar:a.Nx(),streamItems:z.bD(this.Wa),sD:this.Ux(),heroPromos:a.I0()};z.dw(this.Ra,BVa,a)};z.f.KF=function(){this.ow&&this.track(new z.ZT(this.ua(),this.ow))};z.f.Q2=z.Ppa();var FVa=z.ux;z.xx(z.xx(FVa.ua().scope("app"),"CollectionHomeScreen",S0),"HomeScreen",W0);z.WN(FVa,"home-screens");}).call(this, _mdm);
