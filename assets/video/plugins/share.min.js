!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t="undefined"!=typeof globalThis?globalThis:t||self).flowplayer=t.flowplayer||{},t.flowplayer.share=e())}(this,(function(){"use strict";const t=[].slice;function e(t,e,...n){for(const n in e)t[n]=e[n];return t}function n(t,e,n){const o=function(t){return Array.isArray(t)?t.slice(0):t.split(".")}(e);for(;o.length;){if(null==t)return n;const e=o.shift();if("string"!=typeof e)return n;t=t[e]}return null==t?n:t}const o=!!function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(t){}return t}()&&{passive:!0},i=["touchstart","touchmove"];function r(t){var n=t;return n.emit=function(t,o,i={}){const r=function(t){const e=document.createEvent("Event");return e.initEvent(t,!1,!0),e}(t);return o&&e(r,{data:o||{}}),n.dispatchEvent(r),!1===i.return_self?r:n},n.on=function(t,e){return"string"==typeof t&&(t=t.split(" ")),t.forEach((function(t){return function(t){return~i.indexOf(t)}(t)?n.addEventListener(t,e,o):n.addEventListener(t,e)})),n},n.off=function(t,e){return n.removeEventListener(t,e),n},n.one=n.once=function(t,e){return n.on(t,(function o(i){n.off(t,o),e(i)}))},n}const a=Array.isArray,s="undefined"!=typeof window&&r(window),u="undefined"!=typeof document&&r(document),l=["span","a","em","p","i"];function c(t,e,n){var o=d(document.createElement(t));if(a(e)&&(n=e,e=!1),n||(n=[]),n&&!a(n)&&(n=[n]),n.length&&n.filter(t=>!!t).forEach(t=>o.append(t)),"object"!=typeof e)return o;for(var i in e)i in o?o[i]=e[i]:o.setAttribute(i,e[i]);return o}function f(e){var n=e.tagName;e.__flowplayer__=1,e.find=function(t){var n=e.querySelector(t);return n?d(n):n},e.html=function(t){return e.innerHTML=t,e},e.empty=function(){return e.innerHTML="",e},e.offset=function(){var t={top:0,left:0},n=e;do{t.left+=n.offsetLeft||0,t.top+=n.offsetTop||0}while(n=n.offsetParent);return t},e.innerWidth=function(){var t=getComputedStyle(e);return e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)};var o=e.insert=function(t,n){return n?a(n)?n.map((function(n){return e.insert(t,n)}))[0]:d(n="string"==typeof n?e.insertAdjacentHTML(t,n):e.insertAdjacentElement?e.insertAdjacentElement(t,n):e.appendChild(n)):n};return e.append=o.bind(e,"beforeend"),e.prepend=o.bind(e,"afterbegin"),e.css=function(t,n){if("object"==typeof t){for(const n in t)e.css(n,t[n]);return e}return void 0===n&&"string"==typeof t?getComputedStyle(e)[t]:("number"==typeof n&&(n+="px"),e.style[t]=n,e)},e.show=function(){return e.css({display:~l.indexOf(n)?"inline":"block"})},e.hide=function(){return e.css({display:"none"})},e.remove=function(){var t=e.parentNode;t&&t.removeChild(e)},e.attr=function(t,n){return null==n?e.getAttribute(t):(e.setAttribute(t,n),e)},e.txt=function(t){return e.textContent=t,e},e.fp=function(t){return e.addClass("fp-"+t)},e.addClass=function(t){return t.split(" ").forEach((function(t){e.hasClass(t)||(e.className+=(e.className?" ":"")+t)})),e},e.removeClass=function(t){const n=t.split(" ");var o=e.className.split(" ");return e.className=o.filter((function(t){return!~n.indexOf(t)})).join(" "),e},e.toggleClass=function(t,n){return void 0===n&&(n=!e.hasClass(t)),n?e.addClass(t):e.removeClass(t)},e.findAll=function(n){return o=e.querySelectorAll(n),t.call(o);var o},e.hasClass=function(t){return~e.className.split(" ").indexOf(t)},e}function d(t){return void 0===t||function(t){return t&&t.__flowplayer__}(t)?t:f(r(t))}function p(t,e){if("string"==typeof t&&"<"==t[0])return c(t.slice(1,-1),e);if("string"!=typeof t)return d(t);var n=e instanceof HTMLElement&&e.querySelector(".fp-"+t)||document.querySelector(t);return n?d(n):void 0}const m=t=>(e,n)=>("string"==typeof e&&(e={class:e}),c(t,e,n));function h(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function v(t){var e,n,o=h("svg");return o.setAttribute("viewBox",t.coords),t.name&&o.setAttribute("class",t.name),t.title&&o.setAttribute("title",t.title),t.title&&o.setAttribute("aria-label",t.title),o.setAttribute("tabindex","0"),o.setAttribute("focusable","true"),o.appendChild((e=t.link,(n=h("use")).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),n)),p(o)}Object.assign(p,{div:m("div"),img:m("img"),li:m("li"),ol:m("ol"),span:m("span"),p:m("p"),i:m("i"),a:m("a"),el:c,document:u,window:s});var g={TOGGLE_OPEN:"menu:toggle:open",RENDER:"menu:render",PUSH:"menu:push"},_={ON:"fp-on",INVIS:"fp-invis"};function w(t,e){var n=window.__flowplayer_active_menu;if(n&&n.root&&n.root!==e&&n.root.toggleClass("has-menu-opened",!1),!t||!e)return n.menu=0,void(n.root=0);n.menu=t,n.root=e,n.root.toggleClass("has-menu-opened",!0)}if(!window.__flowplayer_active_menu){window.__flowplayer_active_menu={menu:0,root:0};document.addEventListener("click",(function(t){if(window.__flowplayer_active_menu){var e=window.__flowplayer_active_menu.menu,n=window.__flowplayer_active_menu.root;if(e&&n)if(document.contains(e)){if(e.hasClass(_.ON)){var o=e.parentElement;e.contains(t.target)||o.contains(t.target)||n.emit(g.TOGGLE_OPEN,{menu:e,open:!1})}}else w(null)}}))}function y(t,n,o){var i=o.id||"menu-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);return o=o||{},t.attr("role","button").attr("aria-haspopup","true").attr("aria-expanded","false").attr("aria-controls",i).attr("aria-label",o.title),o.options=o.options||[],o.id=i,y._interface(t,n,function(...t){return t.slice(1).reduce((t,n)=>e(t,n),t[0]||{})}({},o))}y.title=function(t){return p("<h3>").txt(t)},y.close=function(t){return p.span("fp-close").on("click",t).html("&times;")},y.option=function(t,e){var n=this,o=p("<li>").attr("tabindex","0").attr("role","menuitem"),i=n._attrs;t.icon&&o.append(v(t.icon)),o.append(p("<span>").txt(t.text)),o.on("click",(function(o){i.multi||n.options().forEach(y.off),n.activate(e),"function"==typeof t.onclick&&t.onclick(o,t,e,n)})),o.idx=e,n.append(o)},y._interface=function(t,e,o){t.addClass("fp-menu-container");var i=p("<ul>").attr("id",o.id).addClass("fp-menu").attr("role","menu");return o.icons&&i.addClass("fp-icons"),i._attrs=o,t.on("click",(function(t){setTimeout((function(){if(!t.defaultPrevented)return i.hasClass(_.ON)?e.emit(g.TOGGLE_OPEN,{menu:i,open:!1}):void e.emit(g.TOGGLE_OPEN,{menu:i,open:!0})}),0)})),e.on(g.TOGGLE_OPEN,(function(o){if(n(o,"data.menu")!==i)return i.toggleClass(_.ON,!1),t.attr("aria-expanded","false");var r=n(o,"data.open",!1);if(i.toggleClass(_.ON,r),r?w(i,e):w(null),t.attr("aria-expanded",r?"true":"false"),e.hasClass("is-accessibility"))if(r){var a=i.options()[0];a&&a.focus()}else t.focus()})),i.push=function(t){return i._attrs.options=n(i,"_attrs.options",[]),i._attrs.options.push(t),i.render()},i.select=function(t){return i.render(i.options.filter(t))},i.render=function(e){var n=i._attrs;return i.empty(),i.prepend(y.close()),n.title&&i.prepend(y.title(n.title)),n.options=e||n.options,n.options.forEach(y.option,i),t.toggleClass(_.INVIS,0==n.options.length),i._activate(),i},i.close=function(){i.hasClass(_.ON)&&e.emit(g.TOGGLE_OPEN,{menu:i,open:!1})},i._activate=function(){i.options().forEach((function(t){t.toggleClass(_.ON,t.idx===i.idx)}))},i.options=function(){return[].slice.call(i.querySelectorAll("li"))},i.activate=function(t,e){void 0===i.idx||i.idx!==t||e?i.idx=t:delete i.idx,i._activate()},i.deactivate=function(){i.activate(i.idx)},i.render(o.options),t.appendChild(i),i},y.on=function(t){return t.addClass(_.ON),t},y.off=function(t){return t.removeClass(_.ON),t},y.CONTAINER_CLASS="fp-menu",y.Events=g,y.States=_;var b={coords:"-5 25 460 460",link:"#fp-facebook",name:"fp-facebook"},x={coords:"0 0 512 512",link:"#fp-link",name:"fp-link"},C={coords:"0 0 448 512",link:"#fp-share",name:"fp-share"},E={coords:"0 0 512 512",link:"#fp-share",name:"fp-embed"},O={coords:"0 0 512 512",link:"#fp-twitter",name:"fp-twitter"};function k(){try{return(document.querySelector("meta[name='description']")||{content:""}).content}catch(t){return""}}function N(t){if("string"==typeof t.link)return t.link;var e=document.querySelector("link[rel=canonical]");return e?e.href:window.location.toString()}function A(t,e,o){var i=0,r=p.span("fp-share-menu fp-menu-container").attr("tabindex","0");r.append(v(C).attr("tabindex",""));var a={prev_config:0,webshare_listener:0};o.on("mount",(function(){var t=n(e,"ui.header.secondary");t&&t.append(r)}));var s=y(r,e,{title:o._t("share.menu_title"),icons:!0,options:[]});function u(t,e,n){return{text:(i=t,0===i.indexOf("share.")?o._t(i):i),icon:n,onclick:S.bind(null,o,s,e)};var i}o.on("config",(function(e){var i=n(e,"data.share",{});if(!1===i)return function(t){t.removeClass("webshare-enabled")}(r);if(a.prev_config!==i){if(a.prev_config=i,function(){try{return"https:"===window.location.protocol&&"function"==typeof navigator.share}catch(t){return!1}}()&&n(i,"web_share",!0))return function(t){t.addClass("webshare-enabled")}(r),a.webshare_listener||function(t,e,o){o.webshare_listener=!0,e.on("click",(function(o){if(!i&&e.hasClass("webshare-enabled")){o.preventDefault();var i=navigator.share({title:n(t,"share.title",document.title),text:n(t,"share.text",k()),url:N(n(t,"share",{}))});i.catch((function(){}))}}))}(t,r,a);var l=[],c="string"==typeof i.link?i.link:window.location.toString();if(i.iframe){var f="string"==typeof i.iframe?i.iframe:c;l.push(u("share.embed",L.bind(null,f,o),E))}i.link&&l.push(u("share.link",T.bind(null,c),x)),i.facebook&&l.push(u("Facebook",R.bind(null,c),b)),i.twitter&&l.push(u("Twitter",G.bind(null,c),O)),s.render(l)}}));e.on(y.Events.TOGGLE_OPEN,(function(t){if(t.data&&t.data.menu===s){if(o.root.toggleClass("is-share-menu",t.data.open),e.hasClass("is-small"))return(n=!!t.data)&&!o.paused&&(o.pause(),i=1),!n&&i&&(o.play(),i=0),void function(t,e,n,o){var i=o.getBoundingClientRect(),r=function(t,e){var n={top:0,left:0},o=t;for(;o.parentElement&&o.parentElement!==e;)o=o.parentElement,n.top+=o.offsetTop,n.left+=o.offsetLeft;return n}(e,o),a=(s=n,[].reduce.call(s.childNodes,(function(t,e){return t+e.getBoundingClientRect().height}),0));var s;n.css({position:"absolute",right:"auto",bottom:"auto",top:-r.top+"px",left:-r.left+"px",width:i.width+"px",height:a+"px",minHeight:i.height+"px",maxHeight:i.height+"px",margin:0})}(0,r,s,e);var n;!function(t,e,n,o){var i,r=function(t,e){var n=t.getBoundingClientRect(),o=e.getBoundingClientRect();return{left:n.left-o.left,right:n.right-o.left,top:n.top-o.top,bottom:n.bottom-o.top}}(e,o),a=o.getBoundingClientRect(),s=o.hasClass("logo-on-right");i={right:"auto",left:r.right+"px",top:(s?0:r.top)+"px",bottom:"auto",width:"auto",height:"auto",minHeight:"",maxHeight:.75*a.height+"px",margin:"0.5em"},n.css(i)}(0,r,s,e)}}))}function S(t,e,n){e.deactivate();var o=n();o.success&&o.message&&t.message&&t.root.emit(t.message.events.SHOW_MESSAGE,{message:o.message})}function L(t,e){var n=e.videoHeight/e.videoWidth;return T('<div style="position:relative;width:100%;display:inline-block;"><iframe src="__IFRAME_SRC__" allowfullscreen style="border:none;position:absolute;top:0;left:0;width:100%;height:100%;"></iframe><div style="padding-top: __RATIO__%;"></div></div>'.replace("__IFRAME_SRC__",encodeURI(t)).replace("__RATIO__",100*n))}function T(t){var e=p.el("textarea").css({opacity:0,position:"absolute"});e.value=t;var n=p(document.body);n.append(e),e.select();var o=document.execCommand("copy");return n.removeChild(e),{success:o,message:o?"<trans share.clipboard_success trans>":"<trans share.clipboard_failure trans>"}}function R(t){return P("https://www.facebook.com/sharer.php?u="+encodeURIComponent(t)),{success:!0}}function G(t){return P("https://twitter.com/intent/tweet?url="+encodeURIComponent(t)),{success:!0}}function P(t){var e,n,o=screen.height,i=screen.width;e=Math.round(i/2-275),n=0,o>420&&(n=Math.round(o/2-210)),window.open(t,"sharer","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,left="+e+",top="+n)}return function(t,e){if("object"==typeof exports&&"undefined"!=typeof module)return e;"flowplayer"in t||(t.flowplayer={extensions:[]});var n=t.flowplayer;"function"==typeof n?n(e):(Array.isArray(n.extensions)||(n.extensions=[]),~n.extensions.indexOf(e)||n.extensions.push(e))}(window,A),A}));
