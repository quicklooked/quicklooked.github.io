!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t="undefined"!=typeof globalThis?globalThis:t||self).flowplayer=t.flowplayer||{},t.flowplayer.airplay=e())}(this,(function(){"use strict";var t={coords:"0 0 512 512",link:"#fp-airplay",name:"fp-airplay"};const e=[].slice;const n=!!function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(t){}return t}()&&{passive:!0},r=["touchstart","touchmove"];function i(t){var e=t;return e.emit=function(t,n,r={}){const i=function(t){const e=document.createEvent("Event");return e.initEvent(t,!1,!0),e}(t);return n&&function(t,e,...n){for(const n in e)t[n]=e[n]}(i,{data:n||{}}),e.dispatchEvent(i),!1===r.return_self?i:e},e.on=function(t,i){return"string"==typeof t&&(t=t.split(" ")),t.forEach((function(t){return function(t){return~r.indexOf(t)}(t)?e.addEventListener(t,i,n):e.addEventListener(t,i)})),e},e.off=function(t,n){return e.removeEventListener(t,n),e},e.one=e.once=function(t,n){return e.on(t,(function r(i){e.off(t,r),n(i)}))},e}const o=Array.isArray,a="undefined"!=typeof window&&i(window),s="undefined"!=typeof document&&i(document),u=["span","a","em","p","i"];function l(t,e,n){var r=c(document.createElement(t));if(o(e)&&(n=e,e=!1),n||(n=[]),n&&!o(n)&&(n=[n]),n.length&&n.filter(t=>!!t).forEach(t=>r.append(t)),"object"!=typeof e)return r;for(var i in e)i in r?r[i]=e[i]:r.setAttribute(i,e[i]);return r}function f(t){var n=t.tagName;t.__flowplayer__=1,t.find=function(e){var n=t.querySelector(e);return n?c(n):n},t.html=function(e){return t.innerHTML=e,t},t.empty=function(){return t.innerHTML="",t},t.offset=function(){var e={top:0,left:0},n=t;do{e.left+=n.offsetLeft||0,e.top+=n.offsetTop||0}while(n=n.offsetParent);return e},t.innerWidth=function(){var e=getComputedStyle(t);return t.clientWidth-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)};var r=t.insert=function(e,n){return n?o(n)?n.map((function(n){return t.insert(e,n)}))[0]:c(n="string"==typeof n?t.insertAdjacentHTML(e,n):t.insertAdjacentElement?t.insertAdjacentElement(e,n):t.appendChild(n)):n};return t.append=r.bind(t,"beforeend"),t.prepend=r.bind(t,"afterbegin"),t.css=function(e,n){if("object"==typeof e){for(const n in e)t.css(n,e[n]);return t}return void 0===n&&"string"==typeof e?getComputedStyle(t)[e]:("number"==typeof n&&(n+="px"),t.style[e]=n,t)},t.show=function(){return t.css({display:~u.indexOf(n)?"inline":"block"})},t.hide=function(){return t.css({display:"none"})},t.remove=function(){var e=t.parentNode;e&&e.removeChild(t)},t.attr=function(e,n){return null==n?t.getAttribute(e):(t.setAttribute(e,n),t)},t.txt=function(e){return t.textContent=e,t},t.fp=function(e){return t.addClass("fp-"+e)},t.addClass=function(e){return e.split(" ").forEach((function(e){t.hasClass(e)||(t.className+=(t.className?" ":"")+e)})),t},t.removeClass=function(e){const n=e.split(" ");var r=t.className.split(" ");return t.className=r.filter((function(t){return!~n.indexOf(t)})).join(" "),t},t.toggleClass=function(e,n){return void 0===n&&(n=!t.hasClass(e)),n?t.addClass(e):t.removeClass(e)},t.findAll=function(n){return r=t.querySelectorAll(n),e.call(r);var r},t.hasClass=function(e){return~t.className.split(" ").indexOf(e)},t}function c(t){return void 0===t||function(t){return t&&t.__flowplayer__}(t)?t:f(i(t))}function d(t,e){if("string"==typeof t&&"<"==t[0])return l(t.slice(1,-1),e);if("string"!=typeof t)return c(t);var n=e instanceof HTMLElement&&e.querySelector(".fp-"+t)||document.querySelector(t);return n?c(n):void 0}const p=t=>(e,n)=>("string"==typeof e&&(e={class:e}),l(t,e,n));function y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function v(t){var e,n,r=y("svg");return r.setAttribute("viewBox",t.coords),t.name&&r.setAttribute("class",t.name),t.title&&r.setAttribute("title",t.title),t.title&&r.setAttribute("aria-label",t.title),r.setAttribute("tabindex","0"),r.setAttribute("focusable","true"),r.appendChild((e=t.link,(n=y("use")).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),n)),d(r)}function b(t,e){if(!(this instanceof b))return new b(t,e);var n=this,r=n.button=b.render(n,e);e.attr("x-webkit-airplay","allow"),e.on(b.AVAILABILITY_CHANGE,(function(t){b.update(e,t)})),e.on(b.WIRELESS_CHANGE,(function(){return e.emit(e.webkitCurrentPlaybackTargetIsWireless?"start-airplay":"stop-airplay"),e.setState(b.ACTIVE_CLASS,e.webkitCurrentPlaybackTargetIsWireless)})),r.on("click",(function(){e.webkitShowPlaybackTargetPicker()})),e.on("reap",(function(){b.destroy(n)}))}return Object.assign(d,{div:p("div"),img:p("img"),li:p("li"),ol:p("ol"),span:p("span"),p:p("p"),i:p("i"),a:p("a"),el:l,document:s,window:a}),b.of=b,b.ACTIVE_CLASS="is-airplay",b.AVAILABLE_CLASS="is-airplay-available",b.AVAILABILITY_CHANGE="webkitplaybacktargetavailabilitychanged",b.WIRELESS_CHANGE="webkitcurrentplaybacktargetiswirelesschanged",b.AVAILABLE="available",b.supported="WebKitPlaybackTargetAvailabilityEvent"in window,b.unsupported=!b.supported,b.update=function(t,e){var n=e.availability==b.AVAILABLE&&t.currentSrc&&0!==t.currentSrc.indexOf("blob");t.setState(b.AVAILABLE_CLASS,n)},b.render=function(e,n){var r=v(t);return n.root.ui.header.secondary.prepend(r)},b.destroy=function(t){t.button=0},function(t,e){if("object"==typeof exports&&"undefined"!=typeof module)return e;"flowplayer"in t||(t.flowplayer={extensions:[]});var n=t.flowplayer;"function"==typeof n?n(e):(Array.isArray(n.extensions)||(n.extensions=[]),~n.extensions.indexOf(e)||n.extensions.push(e))}(window,(function(t,e,n){var r=(t.plugin||{}).airplay;b.unsupported||0==r||(n.setOpts({hls:Object.assign({},{native:!0},t.hls)}),b.of(r,n))})),b}));
