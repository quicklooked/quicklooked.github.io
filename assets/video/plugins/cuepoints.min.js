!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((n="undefined"!=typeof globalThis?globalThis:n||self).flowplayer=n.flowplayer||{},n.flowplayer.cuepoints=e())}(this,(function(){"use strict";const n=[].slice;function e(n,e,...t){for(const t in e)n[t]=e[t];return n}function t(n,e,t){const r=function(n){return Array.isArray(n)?n.slice(0):n.split(".")}(e);for(;r.length;){if(null==n)return t;const e=r.shift();if("string"!=typeof e)return t;n=n[e]}return null==n?t:n}const r=!!function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(n){}return n}()&&{passive:!0},i=["touchstart","touchmove"];function o(n){var t=n;return t.emit=function(n,r,i={}){const o=function(n){const e=document.createEvent("Event");return e.initEvent(n,!1,!0),e}(n);return r&&e(o,{data:r||{}}),t.dispatchEvent(o),!1===i.return_self?o:t},t.on=function(n,e){return"string"==typeof n&&(n=n.split(" ")),n.forEach((function(n){return function(n){return~i.indexOf(n)}(n)?t.addEventListener(n,e,r):t.addEventListener(n,e)})),t},t.off=function(n,e){return t.removeEventListener(n,e),t},t.one=t.once=function(n,e){return t.on(n,(function r(i){t.off(n,r),e(i)}))},t}const u=Array.isArray,s="undefined"!=typeof window&&o(window),c="undefined"!=typeof document&&o(document),f=["span","a","em","p","i"];function a(n,e,t){var r=d(document.createElement(n));if(u(e)&&(t=e,e=!1),t||(t=[]),t&&!u(t)&&(t=[t]),t.length&&t.filter(n=>!!n).forEach(n=>r.append(n)),"object"!=typeof e)return r;for(var i in e)i in r?r[i]=e[i]:r.setAttribute(i,e[i]);return r}function l(e){var t=e.tagName;e.__flowplayer__=1,e.find=function(n){var t=e.querySelector(n);return t?d(t):t},e.html=function(n){return e.innerHTML=n,e},e.empty=function(){return e.innerHTML="",e},e.offset=function(){var n={top:0,left:0},t=e;do{n.left+=t.offsetLeft||0,n.top+=t.offsetTop||0}while(t=t.offsetParent);return n},e.innerWidth=function(){var n=getComputedStyle(e);return e.clientWidth-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)};var r=e.insert=function(n,t){return t?u(t)?t.map((function(t){return e.insert(n,t)}))[0]:d(t="string"==typeof t?e.insertAdjacentHTML(n,t):e.insertAdjacentElement?e.insertAdjacentElement(n,t):e.appendChild(t)):t};return e.append=r.bind(e,"beforeend"),e.prepend=r.bind(e,"afterbegin"),e.css=function(n,t){if("object"==typeof n){for(const t in n)e.css(t,n[t]);return e}return void 0===t&&"string"==typeof n?getComputedStyle(e)[n]:("number"==typeof t&&(t+="px"),e.style[n]=t,e)},e.show=function(){return e.css({display:~f.indexOf(t)?"inline":"block"})},e.hide=function(){return e.css({display:"none"})},e.remove=function(){var n=e.parentNode;n&&n.removeChild(e)},e.attr=function(n,t){return null==t?e.getAttribute(n):(e.setAttribute(n,t),e)},e.txt=function(n){return e.textContent=n,e},e.fp=function(n){return e.addClass("fp-"+n)},e.addClass=function(n){return n.split(" ").forEach((function(n){e.hasClass(n)||(e.className+=(e.className?" ":"")+n)})),e},e.removeClass=function(n){const t=n.split(" ");var r=e.className.split(" ");return e.className=r.filter((function(n){return!~t.indexOf(n)})).join(" "),e},e.toggleClass=function(n,t){return void 0===t&&(t=!e.hasClass(n)),t?e.addClass(n):e.removeClass(n)},e.findAll=function(t){return r=e.querySelectorAll(t),n.call(r);var r},e.hasClass=function(n){return~e.className.split(" ").indexOf(n)},e}function d(n){return void 0===n||function(n){return n&&n.__flowplayer__}(n)?n:l(o(n))}function p(n,e){if("string"==typeof n&&"<"==n[0])return a(n.slice(1,-1),e);if("string"!=typeof n)return d(n);var t=e instanceof HTMLElement&&e.querySelector(".fp-"+n)||document.querySelector(n);return t?d(t):void 0}const m=n=>(e,t)=>("string"==typeof e&&(e={class:e}),a(n,e,t));Object.assign(p,{div:m("div"),img:m("img"),li:m("li"),ol:m("ol"),span:m("span"),p:m("p"),i:m("i"),a:m("a"),el:a,document:c,window:s});var v=window.VTTCue||window.TextTrackCue;function y(n,t,r){var i=n.startTime||n.start,o=n.endTime||n.end,u=n.text||"";try{var s=new v(i,o,u);return function(...n){n.slice(1).reduce((n,t)=>e(n,t),n[0]||{})}(s,{id:t.toString()},n),s.onenter=r.emit.bind(r,"cuepointstart",{cuepoint:n}),s.onexit=r.emit.bind(r,"cuepointend",{cuepoint:n}),s}catch(n){if(i===o)return console.warn("Cue(:error)> startTime cannot equal endTime on this platform");throw n}}function h(n,e){n.cues&&n.cues.length&&[].slice.call(n.cues).forEach(e)}return function(n,e){if("object"==typeof exports&&"undefined"!=typeof module)return e;"flowplayer"in n||(n.flowplayer={extensions:[]});var t=n.flowplayer;return"function"==typeof t?(t(e),e):(Array.isArray(t.extensions)||(t.extensions=[]),~t.extensions.indexOf(e)||t.extensions.push(e),e)}(window,(function(n,e,r){var i=r.addTextTrack("metadata","fp-cuepoints");r.reaper.put("cuepoints",[]),r.on("config",(function(e){t(e,"data.cuepoints",[])!==r.cuepoints&&r.emit("cuepoints",{cuepoints:n.cuepoints})})),r.on(["cuepoints:redraw","durationchange"],(function(){n.draw_cuepoints&&e.timeline&&function(n,e,t){if(n){var r=e.duration;if(isFinite(r))n.findAll(".fp-cuepoint").forEach((function(n){n.remove()})),h(t,(function(e,t){var i=Math.round(e.startTime/r*1e3)/10,o=p.span("fp-cuepoint");if(i>100||i<0)return console.warn("Cuepoint("+t+") does not have a valid startTime("+e.startTime+") ");o.css("left",i+"%");var u=(e.endTime-e.startTime)/r*100;o.css("width",u+"%"),n.append(o)}))}}(e.timeline,r,i)})),r.on("cuepoints",(function(n){var e=t(n,"data.cuepoints",[]);r.reaper.put("cuepoints",e),h(i,(function(n){n&&i.removeCue(n)})),e.map((function(n,e){return y(n,"cuepoint-"+e,r)})).forEach((function(n){i.addCue(n)})),r.emit("cuepoints:redraw")}))}))}));
